- name: Upgrade system (Arch Linux)
  when: ansible_os_family == 'Archlinux'
  block:
    - name: Ensure latest keyring
      pacman:
        name: archlinux-keyring
        state: latest
        update_cache: yes

    - name: Upgrade system
      pacman:
        update_cache: true
        upgrade: true

    - name: Install packages
      pacman:
        name:
          - hdparm
        state: present

- name: Install packages (Debian / Ubuntu)
  when: ansible_os_family == 'Debian' or ansible_os_family == 'Ubuntu'
  block:
    - name: Upgrade system
      apt:
        update_cache: true
        upgrade: true

    - name: Install packages
      apt:
        name:
          - hdparm
        state: present
