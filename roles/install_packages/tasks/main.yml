- name: Install packages (Arch Linux)
  when:
    - ansible_os_family == 'Archlinux'
    - packages is defined
  pacman:
    name: "{{ packages }}"
    state: present

- name: Install packages (Debian / Ubuntu)
  when:
    - packages is defined
    - ansible_os_family == 'Debian' or ansible_os_family == 'Ubuntu'
  apt:
    name: "{{ packages }}"
    state: present
